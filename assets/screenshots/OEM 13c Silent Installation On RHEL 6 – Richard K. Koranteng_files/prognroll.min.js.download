(function(a){a.fn.prognroll=function(c){var b=a.extend({height:5,color:"#50bcb6",custom:!1},c);return this.each(function(){var d,c,f;if(a(this).data('prognroll'))return!1;a(this).data('prognroll',!0),d=a("<span>",{class:"prognroll-bar"}),a("body").prepend(d),d.css({position:"fixed",top:0,left:0,width:0,height:b.height,backgroundColor:b.color,zIndex:2147483647}),c={progressBar:a(".prognroll-bar"),windowScrollTop:a(window).scrollTop(),windowOuterHeight:a(window).outerHeight(),bodyHeight:a(document).height()};function e(){a(window).scroll(function(b){b.preventDefault(),c.windowScrollTop=a(window).scrollTop(),c.windowOuterHeight=a(window).outerHeight(),c.bodyHeight=a(document).height();var d=c.windowScrollTop/(c.bodyHeight-c.windowOuterHeight)*100;c.progressBar.css("width",d+"%")})}b.custom===!1?e():a(this).css("max-height")=="none"?e():a(this).scroll(function(g){var b,d,e,f;g.preventDefault(),b=a(this).scrollTop(),d=a(this).outerHeight(),e=a(this).prop("scrollHeight"),f=b/(e-d)*100,c.progressBar.css("width",f+"%")}),f=c.windowScrollTop/(c.bodyHeight-c.windowOuterHeight)*100,c.progressBar.css("width",f+"%")})}})(jQuery)